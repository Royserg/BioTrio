<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">

    <head th:replace="fragments/fragments :: head(title='Theaters')" />

    <body>
    <nav th:replace="fragments/fragments :: navbar" />

    <div class="container-fluid">
        <div class="row">
            <nav th:replace="fragments/fragments :: sidebar" />
            <div class="col-md-10 mt-3">
                <h4 th:replace="fragments/fragments :: heading(text='Theaters')" />

                <!-- Button opening Modal for adding new Theater -->
                <div class="d-flex justify-content-end mb-4">
                    <button class="btn btn-primary">Add Theater</button>
                </div>


                <!-- TODO: Theater Modal for adding and editing, please read below
                     Could you check https://getbootstrap.com/docs/4.0/components/modal/, modal-body class
                    is just a container for everything that is between modal header and footer, so it is not neccessary to
                    add for each element extra container with class="modal-body"
                    naming is confusing, when you use half of the words in just small caps and then camel-case last word
                    id: editname, editrowsNumber, editcolumnsNumber
                    suggestion: nameField, rowsNumberField, columnNumberField
                 -->
                <div class="modal fade" id="editTheater" tabindex="-1" role="dialog" aria-labelledby="theaterModal" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalTitle">Edit Theaters</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <label for="theaterName">Theater name</label>
                                <input type="text" class="form-control" id="editname" placeholder="Edit name" maxlength="50">
                            </div>
                            <div class="modal-body">
                                <label for="rowsNumber">Rows</label>
                                <input type="number" class="form-control" id="editrowsNumber" placeholder="Edit amount of rows" min="0">
                            </div>
                            <div class="modal-body">
                                <label for="columnsNumber">Columns</label>
                                <input type="number" class="form-control" id="editcolumnsNumber" placeholder="Edit amount of columns" min="0">
                            </div>
                            <div class="modal-body">
                                <label for="can3D">3D option</label>
                                <input type="checkbox" class="form-control" id="editcan3D">
                            </div>
                            <div class="modal-body">
                                <label for="canDolby">Dolby option</label>
                                <input type="checkbox" class="form-control" id="editcanDolby">
                            </div>
                            <div class="modal-footer">
                                <button type="reset" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-warning" id="submitChangesBtn" data-toggle="modal" data-target="#editTheater">Save changes</button>
                            </div>
                        </div>
                    </div>
                </div>

                    <!-- List of available theaters -->
                    <table class="table table-hover">
                        <caption>List of theaters</caption>
                        <thead class="thead-dark">
                            <tr class="d-flex">
                                <th class="col-2">Name</th>
                                <th class="col-2">Rows no.</th>
                                <th class="col-2">Columns no.</th>
                                <th class="col-2">Can 3D?</th>
                                <th class="col-2">Can Dolby?</th>
                                <!-- columns for edit and delete button -->
                                <th class="col-1">edit</th>
                                <th class="col-1">delete</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="d-flex" th:each="theater : ${theaterList}">
                                <td class="col-2" th:text="*{theater.name}" th:value="${theater}"/>
                                <td class="col-2" th:text="${theater.rowsNumber}"/>
                                <td class="col-2" th:text="${theater.columnsNumber}"/>
                                <td class="col-2" th:text="${theater.can3d}"/>
                                <td class="col-2" th:text="${theater.dolby}"/>
                                <td class="col-1"><a href="#"
                                                     id = "editButton"
                                                     class="btn btn-warning"
                                                     data-toggle="modal"
                                                     data-target="#editTheater"
                                                     th:attr="data-theaterid = ${theater.id}"><span class="fas fa-edit"></span></a></td>
                                <td class="col-1">
                                    <button th:attr="data-theaterid=${theater.id}, data-theatername=${theater.name}" class="btn btn-danger"  >
                                        <span class="fas fa-trash"></span>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Add new Theater form -->
                    <!-- TODO: We agreed today that this <details> would be better to just replace with a modal
                        Could you just make that one modal Above able to Edit and Add Theater?
                        Would be better to have addTheater.js file that let's us add dynamically a theater and show it
                        right away on the page instead of refreshing the website.
                        So the modal above could be used for adding and editing.
                        Also it helps when you open a modal when wanting to edit, and the information about the
                        editing Theater are populated in the proper fields
                     -->
                    <details>
                        <summary>Add new theater</summary>
                        <p>
                    <form method="post" th:object="${theaterForm}" >
                        <div class="form-group">
                            <label for="cinemaID">Select Cinema</label>
                            <select class="form-control" id="cinemaID" aria-describedby="cinemaName">
                                <option th:each="cinema : ${cinemaList}" th:attr="data-cinema_id=${cinema.id}" th:text="${cinema.name}"/>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="theaterName">Theater Name</label>
                            <input th:field="*{name}" type="text" class="form-control" id="theaterName" placeholder="Theater Name">
                        </div>
                        <div class="form-group">
                            <label for="rowsNumber">Rows number</label>
                            <input th:field="*{rowsNumber}" type="number" value="1" min="1" class="form-control" id="rowsNumber" placeholder="Rows Number">
                        </div>
                        <div class="form-group">
                            <label for="columnsNumber">Columns number</label>
                            <input th:field="*{columnsNumber}" type="number" value="1" min="1" class="form-control" id="columnsNumber" placeholder="Columns Number">
                        </div>
                        <div class="form-check">
                            <input th:field="*{can3d}" type="checkbox" class="form-check-input" id="can3D">
                            <label class="form-check-label" for="can3D">Can 3d?</label>
                        </div>
                        <div class="form-check">
                            <input th:field="*{dolby}" type="checkbox" class="form-check-input" id="canDolby">
                            <label class="form-check-label" for="canDolby">Can Dolby?</label>
                        </div>
                        <input type="submit" class="btn btn-outline-dark" value="Add Theater"/>
                        <button class="btn btn-outline-dark">Cancel</button>
                    </form>
                        </p>
                    </details>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script th:src="@{/js/theater/deleteTheater.js}"></script>
    <script th:src="@{/js/theater/editTheater.js}"></script>
    </body>
</html>